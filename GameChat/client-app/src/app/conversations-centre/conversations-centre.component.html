<div class="row mx-2 mt-2 justify-content-center">
    <div class="col py-3 shadow bg-white rounded">
        <div class="d-flex">
            <h3 class="mr-auto my-auto">My conversations</h3>

            <button class="btn btn-primary px-2" data-toggle="collapse"
                    data-target="#new-chat-form" [attr.aria-expanded]="newConversationFormExpanded" (click)="expand()">

                <i class="fas mr-1" [ngClass]="newConversationFormExpanded ? 'fa-minus' : 'fa-plus' "></i>
                New
            </button>
        </div>
        <hr />

        <div id="new-chat-form" class="collapse">
            <app-conversation-start-form></app-conversation-start-form>
            <hr />
        </div>

        <div *ngFor="let conv of conversations" class="d-flex py-2 my-2"
             (click)="navigateToConversation(conv.id)"
             [ngClass]="conv.unreadMessages == 0 ? 'conversation-badge' : 'conversation-badge-unread-messages'">

            <div class="ml-2">
                <strong class="my-auto"> {{ conv.title }} </strong>
                <p class="my-auto">
                    <small>With: {{ displayParticipants(conv) }}</small>
                </p>
            </div>
            <div class="ml-auto mr-2 my-auto">
                <span class="fa-fw">
                    <i class="fas fa-2x fa-fw"
                       [ngClass]="[ isGroupChat(conv) ? 'fa-users' : 'fa-user', conv.unreadMessages == 0 ? 'text-secondary' : 'text-warning' ]"></i>
                    <span *ngIf="conv.unreadMessages > 0" class="badge badge-pill badge-warning">{{conv.unreadMessages}}</span>
                </span>
            </div>
        </div>

    </div>
</div>
